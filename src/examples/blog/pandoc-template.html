<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>$title$</title>
    $for(meta)$
    <meta $if(meta.name)$name="$meta.name$"$endif$$if(meta.property)$ property="$meta.property$"$endif$ content="$meta.content$"/>
    $endfor$
    $for(css)$
    <link rel="stylesheet" href="$css$"/>
    $endfor$
    <style>
      .hero img { width: 100%; height: auto; border-radius: 4px; }
      .byline { color: rgba(0,0,0,0.6); margin-top: 0.5rem; }
      .preamble { font-style: italic; color: rgba(0,0,0,0.6); margin-top: 1rem; }
      .fade-in { opacity: 0; transform: translateY(1.5rem); transition: opacity .8s ease-out, transform .8s ease-out; }
      .fade-in.appear { opacity: 1; transform: none; }
    </style>
  </head>
  <body>
    <div id="root"></div>
    <div id="content" style="display:none">
      $if(hero_image)$
      <div class="hero fade-in"><img src="$hero_image$" alt=""/></div>
      $endif$
      <h1 class="fade-in">$title$</h1>
      <p class="byline fade-in">
        $if(author)$<span class="author">$author$</span>$endif$
        $if(pubdate)$ â€¢ <time datetime="$pubdate$">$pubdate$</time>$endif$
      </p>
      $if(preamble)$<p class="preamble fade-in">$preamble$</p>$endif$
      <div class="content">$body$</div>
    </div>
    $for(header-includes)$
    $header-includes$
    $endfor$
    <script>
      const contentElement = document.getElementById('content');
      const content = contentElement.innerHTML;
      contentElement.remove();
      const { createTheme, ThemeProvider, CssBaseline, Container } = MaterialUI;
      function Blog() {
        return React.createElement(ThemeProvider, { theme: createTheme() },
          React.createElement(React.Fragment, null,
            React.createElement(CssBaseline, null),
            React.createElement(Container, { maxWidth: 'md', sx: { my: 4 } },
              React.createElement('div', { dangerouslySetInnerHTML: { __html: content } })
            )
          )
        );
      }
      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(React.createElement(Blog));
      document.querySelectorAll('.content > section').forEach(el => el.classList.add('fade-in'));
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('appear');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });
      document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
    </script>
  </body>
</html>

