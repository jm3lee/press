<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>{{ title }}</title>
    {% if description %}
    <meta name="description" content="{{ description }}" />
    {% endif %}
    {% if og_title %}
    <meta property="og:title" content="{{ og_title }}" />
    {% else %}
    <meta property="og:title" content="{{ title }}" />
    {% endif %}
    {% if og_description %}
    <meta property="og:description" content="{{ og_description }}" />
    {% elif description %}
    <meta property="og:description" content="{{ description }}" />
    {% endif %}
    {% if og_image %}
    <meta property="og:image" content="{{ og_image }}" />
    {% endif %}
    {% if og_url %}
    <meta property="og:url" content="{{ og_url }}" />
    {% elif doc.link.canonical %}
    <meta property="og:url" content="{{ doc.link.canonical }}" />
    {% endif %}
    {% if twitter_card %}
    <meta name="twitter:card" content="{{ twitter_card }}" />
    {% else %}
    <meta name="twitter:card" content="summary_large_image" />
    {% endif %}
    {% if twitter_image %}
    <meta name="twitter:image" content="{{ twitter_image }}" />
    {% elif og_image %}
    <meta name="twitter:image" content="{{ og_image }}" />
    {% endif %}
    {% for css in css %}
    <link rel="stylesheet" href="{{ css }}"/>
    {% endfor %}
    <style>
      :root {
        --accent: #d17b0f;
        --bg: #fff7ed;
        --text: #332f2c;
        --section-bg-1: #fff7ed;
        --section-bg-2: #f4e3d7;
      }
      body {
        background: var(--bg);
        color: var(--text);
        margin: auto;
      }
      .blog-post {
        max-width: 70ch;
        margin-left: auto;
        margin-right: auto;
        padding: 2rem;
        font-family: system-ui, sans-serif;
        line-height: 1.7;
      }
      .blog-post header {
        text-align: center;
        margin-bottom: 2.5rem;
      }
      .blog-post header .hero img {
        width: 100%;
        height: auto;
        border-radius: 0.75rem;
      }
      .blog-post header .byline {
        color: #666;
        font-size: 0.95rem;
        margin-top: 0.5rem;
      }
      .blog-post header .preamble {
        font-style: italic;
        color: #555;
        margin-top: 1rem;
      }
      .blog-post h1,
      .blog-post h2 {
        color: var(--accent);
        margin-top: var(--space-md);
      }
      .blog-post footer {
        margin-top: 4rem;
        text-align: center;
        font-size: 0.85rem;
        color: #777;
      }
      .content > section {
        padding: 1rem;
        margin: 0;
      }
      .content > section + section {
        margin-top: 1.5rem;
      }
      .content > section:nth-of-type(odd) {
        background: var(--section-bg-1);
      }
      .content > section:nth-of-type(even) {
        background: var(--section-bg-2);
      }
      .fade-in {
        opacity: 0;
        transform: translateY(1.5rem);
        transition: opacity .8s ease-out, transform .8s ease-out;
      }
      .fade-in.appear {
        opacity: 1;
        transform: none;
      }
      @media (max-width: 600px) {
        .blog-post {
          padding: 1.5rem;
          margin-left: auto;
          margin-right: auto;
        }
      }
    </style>
  </head>
  <body>
    <article class="blog-post">
      <header class="fade-in">
        {% if hero_image %}
        <div class="hero"><img src="{{ hero_image }}" alt=""/></div>
        {% endif %}
        <h1>{{ title }}</h1>
        <p class="byline">
          {% if doc.author %}<span class="author">{{ doc.author }}</span>{% endif %}
          {% if doc.pubdate %} â€¢ <time datetime="{{ doc.pubdate }}">{{ doc.pubdate }}</time>{% endif %}
        </p>
        {% if preamble %}<p class="preamble">{{ preamble | safe }}</p>{% endif %}
      </header>
      <section class="content">
      {% filter md %}
          {% block content %}
          {% endblock %}
      {% endfilter %}
      </section>
      <footer class="fade-in">
        <hr/>
        <p><small>Enjoyed this article? Share it!</small></p>
      </footer>
    </article>
    {% for header_include in header_includes %}
    {{ header_include | safe }}
    {% endfor %}
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('.content > section').forEach(el => el.classList.add('fade-in'));
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('appear');
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.1 });
        document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
      });
    </script>
  </body>
</html>
