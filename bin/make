#!/bin/bash
#
# Description:
#   Invoke `make` inside the Docker Compose `shell` service.
#   Runs from the project root (/data) so the default `makefile`
#   is used, ensuring a consistent build environment across
#   systems. All arguments are passed directly to the underlying
#   `make` command.
#
# Usage:
#   make [MAKE_TARGETS]
#
# Example:
#   make all
#
# Run "make" in the container with the current user's UID so that
# generated files are owned by the invoking user. The container is
# removed after completion.

docker compose run \
  --rm --entrypoint make -u "$(id -u)" -w /data \
  shell "$@"
